[{"path":"https://docs.ropensci.org/treebase/articles/vignette.html","id":"basic-tree-and-metadata-queries","dir":"Articles","previous_headings":"","what":"Basic tree and metadata queries","title":"Treebase Tutorial","text":"Downloading trees different queries: author, taxa, & study. options described help file. can query metadata record directly. instance, plot growth Treebase submissions publication date (previous query also take date range) weekly’s submissions Treebase? construct way gives us back indices matches, can grab trees directly. Run scripts see ’ve changed!","code":"install.packages('treebase') library(treebase) both <- search_treebase(\"Ronquist or Hulesenbeck\", by=c(\"author\", \"author\")) dolphins <- search_treebase('\"Delphinus\"', by=\"taxon\", max_trees=5) studies <- search_treebase(\"2377\", by=\"id.study\") Near <- search_treebase(\"Near\", \"author\", branch_lengths=TRUE, max_trees=3) Near[1] all <- download_metadata(\"\", by=\"all\") dates <- sapply(all, function(x) as.numeric(x$date)) library(ggplot2) qplot(dates, main=\"Treebase growth\", xlab=\"Year\", binwidth=.5) nature <- sapply(all, function(x) length(grep(\"Nature\", x$publisher))>0) science <- sapply(all, function(x) length(grep(\"^Science$\", x$publisher))>0) sum(nature) sum(science)"},{"path":"https://docs.ropensci.org/treebase/articles/vignette.html","id":"replicating-results","dir":"Articles","previous_headings":"Basic tree and metadata queries","what":"Replicating results","title":"Treebase Tutorial","text":"nice paper Derryberry et al. appeared Evolution recently diversification ovenbirds woodcreepers, (doi:10.1111/j.1558-5646.2011.01374.x). article mentions tree Treebase, let’s see can replicate diversification rate analysis: Let’s grab trees author make sure right one: fit variety diversification rate models avialable laser R package, compare using AIC. result agrees analysis. Using extensive toolset diversification rates R, now rather easily check results hold newer methods TreePar, etc.","code":"search_treebase(\"Derryberry\", \"author\")[[1]] -> tree plot(tree) library(laser) tt <- branching.times(tree) models <-  list(pb = pureBirth(tt),                 bdfit = bd(tt),                 y2r = yule2rate(tt), # yule model with single shift pt                 ddl = DDL(tt), # linear, diversity-dependent                 ddx = DDX(tt), #exponential diversity-dendent                 sv = fitSPVAR(tt), # vary speciation in time                 ev = fitEXVAR(tt), # vary extinction in time                 bv = fitBOTHVAR(tt)# vary both                 ) names(models[[3]])[5] <- \"aic\" aics <- sapply(models, \"[[\", \"aic\") # show the winning model models[which.min(aics)]"},{"path":"https://docs.ropensci.org/treebase/articles/vignette.html","id":"meta-analysis","dir":"Articles","previous_headings":"Basic tree and metadata queries","what":"Meta-Analysis","title":"Treebase Tutorial","text":"course one interesting challenges automated interface ability perform meta-analyses across set available phylogenies treebase. simple proof--principle, let’s check phylogenies treebase see fit birth-death model yule model better. ’ll create two simple functions help analysis. can provided treebase package, ’ve included illustrate real flexibility comes able create custom functions(primarily illustrative; hope users developers create . proper analysis want additional checks.) Return treebase trees branch lengths. download every tree treebase, take . Good thing don’t hand.","code":"timetree <- function(tree){     check.na <- try(sum(is.na(tree$edge.length))>0)     if(is(check.na, \"try-error\") | check.na)       NULL     else     try( chronoMPL(multi2di(tree)) ) } drop_errors <- function(tr){   tt <- tr[!sapply(tr, is.null)]   tt <- tt[!sapply(tt, function(x) is(x, \"try-error\"))]   print(paste(\"dropped\", length(tr)-length(tt), \"trees\"))   tt } require(laser) pick_branching_model <- function(tree){   m1 <- try(pureBirth(branching.times(tree)))   m2 <- try(bd(branching.times(tree)))   as.logical(try(m2$aic < m1$aic)) } all <- search_treebase(\"Consensus\", \"type.tree\", branch_lengths=TRUE) tt <- drop_errors(sapply(all, timetree)) is_yule <- sapply(tt, pick_branching_model) table(is_yule)"},{"path":"https://docs.ropensci.org/treebase/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Carl Boettiger. Author, maintainer. Duncan Temple Lang. Author.","code":""},{"path":"https://docs.ropensci.org/treebase/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Boettiger C, Temple Lang D (2024). treebase: Discovery, Access Manipulation 'TreeBASE' Phylogenies. R package version 0.1.5, https://github.com/ropensci/treebase, https://docs.ropensci.org/treebase/.","code":"@Manual{,   title = {treebase: Discovery, Access and Manipulation of 'TreeBASE' Phylogenies},   author = {Carl Boettiger and Duncan {Temple Lang}},   year = {2024},   note = {R package version 0.1.5, https://github.com/ropensci/treebase},   url = {https://docs.ropensci.org/treebase/}, }"},{"path":"https://docs.ropensci.org/treebase/index.html","id":"treebase","dir":"","previous_headings":"","what":"Discovery, Access and Manipulation of TreeBASE Phylogenies","title":"Discovery, Access and Manipulation of TreeBASE Phylogenies","text":"R package discovery, access manipulation online phylogenies [Publication Methods Ecology Evolution doi:10.1111/j.2041-210X.2012.00247.x","code":""},{"path":"https://docs.ropensci.org/treebase/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Discovery, Access and Manipulation of TreeBASE Phylogenies","text":"treebase available CRAN. can install latest version development website github using devtools package within R. Make sure latest version best experience.","code":"library(devtools) install_github(\"ropensci/treebase\")"},{"path":"https://docs.ropensci.org/treebase/index.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting Started","title":"Discovery, Access and Manipulation of TreeBASE Phylogenies","text":"Use treebase package relatively straight forward: interesting examples take advantage R loop large amounts treebase data tiresome search , download analyze hand. Welcome era big data phylogenetics. treebase part rOpenSci Project","code":"library(treebase) Phylogenies_from_Huelsenbeck <- search_treebase(\"Huelsenbeck\", \"author\")"},{"path":"https://docs.ropensci.org/treebase/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Discovery, Access and Manipulation of TreeBASE Phylogenies","text":"Carl Boettiger, Duncan Temple Lang (2012). Treebase: R package discovery, access manipulation online phylogenies, Methods Ecology Evolution. doi:10.1111/j.2041-210X.2012.00247.x","code":""},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to cache the phylogenies in treebase locally — cache_treebase","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"function cache phylogenies treebase locally","code":""},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"","code":"cache_treebase(   file = paste(\"treebase-\", Sys.Date(), \".rda\", sep = \"\"),   pause1 = 3,   pause2 = 3,   attempts = 10,   max_trees = Inf,   only_metadata = FALSE,   save = TRUE )"},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"file filename cache, otherwise created datestamp pause1 number seconds hesitate requests pause2 number seconds hesitate individual files attempts number attempts access particular resource max_trees maximum number trees return (default Inf) only_metadata option return metadata matching trees save logical indicating whether save file resuls.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"saves cached file treebase","code":""},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"good idea let run overnight","code":""},{"path":"https://docs.ropensci.org/treebase/reference/cache_treebase.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A function to cache the phylogenies in treebase locally — cache_treebase","text":"","code":"if (FALSE) {  treebase <- cache_treebase() }"},{"path":"https://docs.ropensci.org/treebase/reference/clean_data.html","id":null,"dir":"Reference","previous_headings":"","what":"clean the fish.base data into pure ASCII — clean_data","title":"clean the fish.base data into pure ASCII — clean_data","text":"clean fish.base data pure ASCII","code":""},{"path":"https://docs.ropensci.org/treebase/reference/clean_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"clean the fish.base data into pure ASCII — clean_data","text":"","code":"clean_data(metadata)"},{"path":"https://docs.ropensci.org/treebase/reference/clean_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"clean the fish.base data into pure ASCII — clean_data","text":"metadata list item fishbase data","code":""},{"path":"https://docs.ropensci.org/treebase/reference/clean_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"clean the fish.base data into pure ASCII — clean_data","text":"item scrubbed non-ASCII characters","code":""},{"path":"https://docs.ropensci.org/treebase/reference/download_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","title":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","text":"Download metadata treebase using OAI-MPH interface","code":""},{"path":"https://docs.ropensci.org/treebase/reference/download_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","text":"","code":"download_metadata(   query = \"\",   by = c(\"all\", \"until\", \"from\"),   curl = getCurlHandle() )"},{"path":"https://docs.ropensci.org/treebase/reference/download_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","text":"query date format yyyy-mm-dd return data \"\" date,  \"\" date current, \"\" curl calling series many times, call getCurlHandle() first  pass return value . Avoids repeated handshakes server.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/download_metadata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","text":"query must #'  download_metadata(2010-01-01, =\"\")  real query type, return trees regardless date","code":""},{"path":"https://docs.ropensci.org/treebase/reference/download_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download the metadata on treebase using the OAI-MPH interface — download_metadata","text":"","code":"if (FALSE) { Near <- search_treebase(\"Near\", \"author\", max_trees=1)  metadata(Near[[1]]$S.id) ## or manualy give a sudy id metadata(\"2377\")  ### get all trees from a certain depostition date forwards ## m <- download_metadata(\"2009-01-01\", by=\"until\") ## extract any metadata, e.g. publication date: dates <- sapply(m, function(x) as.numeric(x$date)) hist(dates, main=\"TreeBase growth\", xlab=\"Year\")  ### show authors with most tree submissions in that date range  authors <- sapply(m, function(x){    index <- grep( \"creator\", names(x))      x[index]  }) a <- as.factor(unlist(authors)) head(summary(a))  ## Show growth of TreeBASE  all <- download_metadata(\"\", by=\"all\") dates <- sapply(all, function(x) as.numeric(x$date)) hist(dates, main=\"TreeBase growth\", xlab=\"Year\")  ## make a barplot submission volume by journals journals <- sapply(all, function(x) x$publisher) J <- tail(sort(table(as.factor(unlist(journals)))),5) b<- barplot(as.numeric(J)) text(b, names(J), srt=70, pos=4, xpd=T) }"},{"path":"https://docs.ropensci.org/treebase/reference/drop_nonascii.html","id":null,"dir":"Reference","previous_headings":"","what":"remove non-ASCII characters — drop_nonascii","title":"remove non-ASCII characters — drop_nonascii","text":"remove non-ASCII characters","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nonascii.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"remove non-ASCII characters — drop_nonascii","text":"","code":"drop_nonascii(string)"},{"path":"https://docs.ropensci.org/treebase/reference/drop_nonascii.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"remove non-ASCII characters — drop_nonascii","text":"string character string","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nonascii.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"remove non-ASCII characters — drop_nonascii","text":"string dropping html tags spaces","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nontrees.html","id":null,"dir":"Reference","previous_headings":"","what":"drop errors from the search — drop_nontrees","title":"drop errors from the search — drop_nontrees","text":"drop errors search","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nontrees.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"drop errors from the search — drop_nontrees","text":"","code":"drop_nontrees(tr)"},{"path":"https://docs.ropensci.org/treebase/reference/drop_nontrees.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"drop errors from the search — drop_nontrees","text":"tr list phylogenetic trees returned search_treebase","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nontrees.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"drop errors from the search — drop_nontrees","text":"list phylogenetic trees returned successfully","code":""},{"path":"https://docs.ropensci.org/treebase/reference/drop_nontrees.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"drop errors from the search — drop_nontrees","text":"primarily internal use search_treebase, may useful","code":""},{"path":"https://docs.ropensci.org/treebase/reference/dryad_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Search the dryad metadata archive — dryad_metadata","title":"Search the dryad metadata archive — dryad_metadata","text":"Search dryad metadata archive","code":""},{"path":"https://docs.ropensci.org/treebase/reference/dryad_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search the dryad metadata archive — dryad_metadata","text":"","code":"dryad_metadata(study.id, curl = getCurlHandle())"},{"path":"https://docs.ropensci.org/treebase/reference/dryad_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search the dryad metadata archive — dryad_metadata","text":"study.id dryad identifier curl calling series many times, call getCurlHandle() first  pass return value . Avoids repeated handshakes server.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/dryad_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search the dryad metadata archive — dryad_metadata","text":"list object containing study metadata","code":""},{"path":"https://docs.ropensci.org/treebase/reference/dryad_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Search the dryad metadata archive — dryad_metadata","text":"","code":"if (FALSE) {   dryad_metadata(\"10255/dryad.12\") }"},{"path":"https://docs.ropensci.org/treebase/reference/get_nex.html","id":null,"dir":"Reference","previous_headings":"","what":"imports phylogenetic trees from treebase. internal function — get_nex","title":"imports phylogenetic trees from treebase. internal function — get_nex","text":"imports phylogenetic trees treebase. internal function","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_nex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"imports phylogenetic trees from treebase. internal function — get_nex","text":"","code":"get_nex(   query,   max_trees = \"last()\",   returns = \"tree\",   curl = getCurlHandle(),   verbose = TRUE,   pause1 = 1,   pause2 = 1,   attempts = 5,   only_metadata = FALSE )"},{"path":"https://docs.ropensci.org/treebase/reference/get_nex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"imports phylogenetic trees from treebase. internal function — get_nex","text":"query : phylows formatted search, see https://sourceforge.net/apps/mediawiki/treebase/index.php?title=API max_trees limits number trees returned kept. returns return tree object matrix (sequences) curl handle curl verbose logical indicating output printed screen pause1 number seconds hesitate requests pause2 number seconds hesitate individual files attempts number attempts access particular resource","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_nex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"imports phylogenetic trees from treebase. internal function — get_nex","text":"list object containing trees matching search    (class phylo)","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study.html","id":null,"dir":"Reference","previous_headings":"","what":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","title":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","text":"return trees treebase correspond search results get_study deprecated, now can performed easily using phylo_metadata oai_metadata search functions.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","text":"","code":"get_study(search_results, curl = getCurlHandle(), ...)"},{"path":"https://docs.ropensci.org/treebase/reference/get_study.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","text":"search_results output download_metadata, subset thereof curl handle curl web utility repeated calls, see getCurlHandle() function RCurl package details. ... additional arguments pass search_treebase","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","text":"corresponding phylogenies.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"return the trees in treebase that correspond to the search results\nget_study is deprecated, and now can be performed more easily using\nphylo_metadata and oai_metadata search functions. — get_study","text":"function commonly used get trees corresponding   metadata search.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study_id.html","id":null,"dir":"Reference","previous_headings":"","what":"return the study.id from the search results. — get_study_id","title":"return the study.id from the search results. — get_study_id","text":"get_study_id deprecated, now can performed easily using phylo_metadata oai_metadata search functions.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"return the study.id from the search results. — get_study_id","text":"","code":"get_study_id(search_results)"},{"path":"https://docs.ropensci.org/treebase/reference/get_study_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"return the study.id from the search results. — get_study_id","text":"search_results output download_metadata, subset thereof","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"return the study.id from the search results. — get_study_id","text":"study id","code":""},{"path":"https://docs.ropensci.org/treebase/reference/get_study_id.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"return the study.id from the search results. — get_study_id","text":"function commonly used get trees corresponding   metadata search.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/have_branchlength.html","id":null,"dir":"Reference","previous_headings":"","what":"Simple function to identify which trees have branch lengths — have_branchlength","title":"Simple function to identify which trees have branch lengths — have_branchlength","text":"Simple function identify trees branch lengths","code":""},{"path":"https://docs.ropensci.org/treebase/reference/have_branchlength.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simple function to identify which trees have branch lengths — have_branchlength","text":"","code":"have_branchlength(trees)"},{"path":"https://docs.ropensci.org/treebase/reference/have_branchlength.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simple function to identify which trees have branch lengths — have_branchlength","text":"trees list phylogenetic trees (ape/phylo format)","code":""},{"path":"https://docs.ropensci.org/treebase/reference/have_branchlength.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simple function to identify which trees have branch lengths — have_branchlength","text":"logical string indicating branch length data","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"metadata.rda — metadata","title":"metadata.rda — metadata","text":"Contains cache publication metadata search_metadata() pull run  2012-05-12.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"metadata.rda — metadata","text":"","code":"metadata(phylo.md = NULL, oai.md = NULL)"},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"metadata.rda — metadata","text":"phylo.md cached phyloWS (tree) metadata, (optional) oai.md cached OAI-PMH (study) metadata (optional)","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"metadata.rda — metadata","text":"data frame available metadata, (data.table object) columns : \"Study.id\", \"Tree.id\", \"kind\", \"type\", \"quality\", \"ntaxa\"     \"date\", \"publisher\", \"author\", \"title\".","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"metadata.rda — metadata","text":"recreate :   search_metadata()","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"metadata.rda — metadata","text":"","code":"if (FALSE) { meta <- metadata() meta[publisher %in% c(\"Nature\", \"Science\") & ntaxa > 50 & kind == \"Species Tree\",] }"},{"path":"https://docs.ropensci.org/treebase/reference/metadata_from_oai.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function for OAI-MPH interface to the Dryad database — metadata_from_oai","title":"Internal function for OAI-MPH interface to the Dryad database — metadata_from_oai","text":"Internal function OAI-MPH interface Dryad database","code":""},{"path":"https://docs.ropensci.org/treebase/reference/metadata_from_oai.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function for OAI-MPH interface to the Dryad database — metadata_from_oai","text":"","code":"metadata_from_oai(query, curl = curl)"},{"path":"https://docs.ropensci.org/treebase/reference/metadata_from_oai.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function for OAI-MPH interface to the Dryad database — metadata_from_oai","text":"query properly formed url query dryad curl calling series many times, call getCurlHandle() first  pass return value . Avoids repeated handshakes server.","code":""},{"path":[]},{"path":"https://docs.ropensci.org/treebase/reference/oai_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Search the OAI-PMH metadata by date, publisher, or identifier — oai_metadata","title":"Search the OAI-PMH metadata by date, publisher, or identifier — oai_metadata","text":"Search OAI-PMH metadata date, publisher, identifier","code":""},{"path":"https://docs.ropensci.org/treebase/reference/oai_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search the OAI-PMH metadata by date, publisher, or identifier — oai_metadata","text":"","code":"oai_metadata(   x = c(\"date\", \"publisher\", \"author\", \"title\", \"Study.id\", \"attributes\"),   metadata = NULL,   ... )"},{"path":"https://docs.ropensci.org/treebase/reference/oai_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search the OAI-PMH metadata by date, publisher, or identifier — oai_metadata","text":"x one \"date\", \"publisher\", \"identifier\" study metadata returned download_metadata function.  specified download latest copy treebase.  Pass value repeated calls speed function runtime substantially ... additional arguments download_metadata","code":""},{"path":"https://docs.ropensci.org/treebase/reference/oai_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search the OAI-PMH metadata by date, publisher, or identifier — oai_metadata","text":"list values matching query","code":""},{"path":"https://docs.ropensci.org/treebase/reference/phylo_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Search the PhyloWS metadata — phylo_metadata","title":"Search the PhyloWS metadata — phylo_metadata","text":"Search PhyloWS metadata","code":""},{"path":"https://docs.ropensci.org/treebase/reference/phylo_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Search the PhyloWS metadata — phylo_metadata","text":"","code":"phylo_metadata(   x = c(\"Study.id\", \"Tree.id\", \"kind\", \"type\", \"quality\", \"ntaxa\"),   metadata = NULL,   ... )"},{"path":"https://docs.ropensci.org/treebase/reference/phylo_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Search the PhyloWS metadata — phylo_metadata","text":"x one \"Study.ids\", \"Tree.ids\", \"kind\", \"type\", \"quality\", \"ntaxa\" metadata returned search_treebase function.  specified download latest copy PhyloWS metadata treebase.  Pass search results value repeated calls speed function runtime substantially ... additional arguments search_treebase","code":""},{"path":"https://docs.ropensci.org/treebase/reference/phylo_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Search the PhyloWS metadata — phylo_metadata","text":"list values matching query","code":""},{"path":"https://docs.ropensci.org/treebase/reference/search_treebase.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","title":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","text":"function pull phyologeny/phylogenies matching search query","code":""},{"path":"https://docs.ropensci.org/treebase/reference/search_treebase.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","text":"","code":"search_treebase(   input,   by,   returns = c(\"tree\", \"matrix\"),   exact_match = FALSE,   max_trees = Inf,   branch_lengths = FALSE,   curl = getCurlHandle(),   verbose = TRUE,   pause1 = 0,   pause2 = 0,   attempts = 3,   only_metadata = FALSE )"},{"path":"https://docs.ropensci.org/treebase/reference/search_treebase.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","text":"input search query (character string) kind search; author, taxon, subject, study, etc (see list possible search terms, details) returns fn return tree character matrix? exact_match force exact matching author name, taxon, etc. Otherwise partial matching max_trees Upper bound number trees returned, good keeping possibly large initial queries fast branch_lengths logical indicating whether return trees branch lengths. curl handle curl web utility repeated calls, see getCurlHandle() function RCurl package details. verbose logical indicating level progress reporting pause1 number seconds hesitate requests pause2 number seconds hesitate individual files attempts number attempts access particular resource only_metadata option return metadata matching trees lists study.id, tree.id, kind (gene,species,barcode) type (single, consensus) number taxa, possible quality score.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/search_treebase.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","text":"either list trees (multiphylo) list character matrices","code":""},{"path":"https://docs.ropensci.org/treebase/reference/search_treebase.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A function to pull in the phyologeny/phylogenies matching a search query — search_treebase","text":"","code":"if (FALSE) { ## defaults to return phylogeny Huelsenbeck <- search_treebase(\"Huelsenbeck\", by=\"author\")  ## can ask for character matrices: wingless <- search_treebase(\"2907\", by=\"id.matrix\", returns=\"matrix\")  ## Some nexus matrices don't meet read.nexus.data's strict requirements, ## these aren't returned H_matrices <- search_treebase(\"Huelsenbeck\", by=\"author\", returns=\"matrix\")  ## Use Booleans in search: and, or, not ## Note that by must identify each entry type if a Boolean is given HR_trees <- search_treebase(\"Ronquist or Hulesenbeck\", by=c(\"author\", \"author\"))  ## We'll often use max_trees in the example so that they run quickly, ## notice the quotes for species. dolphins <- search_treebase('\"Delphinus\"', by=\"taxon\", max_trees=5) ## can do exact matches humans <- search_treebase('\"Homo sapiens\"', by=\"taxon\", exact_match=TRUE, max_trees=10) ## all trees with 5 taxa five <- search_treebase(5, by=\"ntax\", max_trees = 10) ## These are different, a tree id isn't a Study id.  we report both studies <- search_treebase(\"2377\", by=\"id.study\") tree <- search_treebase(\"2377\", by=\"id.tree\") c(\"TreeID\" = tree$Tr.id, \"StudyID\" = tree$S.id) ## Only results with branch lengths ## Has to grab all the trees first, then toss out ones without branch_lengths Near <- search_treebase(\"Near\", \"author\", branch_lengths=TRUE)  }"},{"path":"https://docs.ropensci.org/treebase/reference/show_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the metadata associated with the study in which the phylogeny\n was published. — show_metadata","title":"Get the metadata associated with the study in which the phylogeny\n was published. — show_metadata","text":"Get metadata associated study phylogeny  published.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/show_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the metadata associated with the study in which the phylogeny\n was published. — show_metadata","text":"","code":"show_metadata(study.id, curl = getCurlHandle())"},{"path":"https://docs.ropensci.org/treebase/reference/show_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the metadata associated with the study in which the phylogeny\n was published. — show_metadata","text":"study.id treebase study id (numbers , specify quotes) curl calling series many times, call getCurlHandle()  first pass return value .  avoids repeated handshakes server.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/show_metadata.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the metadata associated with the study in which the phylogeny\n was published. — show_metadata","text":"tree imported search_treebase,  tree$S.id","code":""},{"path":"https://docs.ropensci.org/treebase/reference/treebase.html","id":null,"dir":"Reference","previous_headings":"","what":"treebase.rda — treebase","title":"treebase.rda — treebase","text":"Contains cache phylogenies cache_treebase() function able pull run  2012-05-14.","code":""},{"path":"https://docs.ropensci.org/treebase/reference/treebase.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"treebase.rda — treebase","text":"recreate :   cache_treebase()","code":""}]
